sudo: false
language: node_js
node_js:
- "14"
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - g++-4.8
    - gcc-4.8-multilib
    - g++-4.8-multilib
    - gcc-multilib
    - g++-multilib
os:
- osx
- linux
before_deploy:
- ARCHIVE_NAME="${TRAVIS_TAG:-latest}-$TRAVIS_OS_NAME-`uname -m`.tar"
- npm run prebuild
- if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then ARCH=ia32 npm run prebuild; fi
- tar --create --verbose --file="$ARCHIVE_NAME" --directory "$TRAVIS_BUILD_DIR/prebuilds"
  .
deploy:
  provider: releases
  draft: false
  prerelease: true
  file: "$ARCHIVE_NAME"
  skip_cleanup: true
  on:
    tags: true
  api_key:
    secure: T+B5Kfms85Suslq9Z3IGPN3RXFtg9YyeVeimzlNuqLTekEHYWUNLKEP6PKacgs6AiZjel7wDkxBQSQzt5f0vNo9C7OfbH+/6heTCX0B8GuGtvC/9UiLDVGc+Yt4Zad2go+DewN3TFRp6gt4UEF7Wa3A4Zs/+pzUUhtnMgTdsAvdvjurF51PRKzDquNi3/tJOhM8ENcCEU2cEIogBN5CNo5HtFt9iL92rn6lhKUIYWdrDsm6aa6JeTLyIeGJxSdKIzsXXqiP0j6gRS9Y6l8C1D5wDj6arT8X3wzdCCGDIRsv3clDIBpWK32tP13vBXKktrJd3UmYYlGHrZIPL/fcB+NuIhcxWwOQruK70OtwyEPfp6+BhiWTB4P4pYbwcH3+cS834Hwcr6SPWndxG1ECEVYd6+zVib42mtESO2hgPHkuEt7NNp7yCERH00dx5dnaj+RE2TMAU8BMwdAUH+JUkR3eM0oydYajmV2OWWDaVmIq8n7KXuJA50mwAGpywsX6X1CmXp7D5XbxqNdrXchKIYBA8U8pxHKSfklaabVcHW7yrIh0PxolVH86lhfaqwMzlQC51C+mOJW42qIY9XX4a8qCUA5idEyI7yzejmkQYeprDzQjLLn7nG01d8nJXOOnXN38lePaYBKRXVAyCWdLG7XFhBvPTk+bIYFPzhpEq+34=
